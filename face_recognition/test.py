import face_recognition
import numpy as np
import time

'''этими командами мы получаем дескриптор который кладем в бд'''


# known_vitya_image = face_recognition.load_image_file("img/0_face_img.jpg")  # загружаем эталонное фото
# vitya_face_encoding = face_recognition.face_encodings(known_vitya_image)[0]  # вычисляем дескриптор
# vitya_face_encoding_list = np.array(vitya_face_encoding).tolist()  # конвертируем в нормальный list
# print(vitya_face_encoding_list)

def discr_compare():
    # сюда запихиваем полученный нормальный дескриптор (он будет в бд)
    known_encodings = [
        [-0.03423100709915161, 0.030248036608099937, 0.05028334632515907, -0.06161051616072655, -0.034394290298223495,
         -0.05063938349485397, -0.08524000644683838, -0.08298271894454956, 0.19423335790634155, -0.11838623136281967,
         0.20875133574008942, -0.030716456472873688, -0.24723806977272034, -0.09699653089046478, -0.007691116072237492,
         0.08396845310926437, -0.051143523305654526, -0.09747564792633057, -0.0356573686003685, -0.12710541486740112,
         0.023224957287311554, 0.04927729070186615, 0.01847306825220585, 0.039518117904663086, -0.2103380560874939,
         -0.27756452560424805, -0.09293187409639359, -0.17441344261169434, -0.04362555220723152, -0.11921825259923935,
         -0.09682486951351166, 0.11545898765325546, -0.1251298487186432, -0.09488257020711899, 0.06003517657518387,
         0.09604521095752716, -0.03837547451257706, 0.031967468559741974, 0.17569011449813843, 0.07934966683387756,
         -0.13286679983139038, -0.010554831475019455, 0.0054776631295681, 0.3013979494571686, 0.1743306666612625,
         0.0041872067376971245, 0.026543959975242615, -0.05212974548339844, 0.17816026508808136, -0.2552129328250885,
         0.08505918085575104, 0.13547508418560028, 0.15712834894657135, 0.05357733368873596, 0.1685035079717636,
         -0.1374913901090622, -0.004753029905259609, 0.13971561193466187, -0.2244962602853775, 0.1234993115067482,
         0.07361166179180145, -0.06506804376840591, -0.11978284269571304, -0.058257587254047394, 0.21318890154361725,
         0.14150574803352356, -0.1666848510503769, -0.05707770586013794, 0.17996200919151306, -0.10942243039608002,
         -0.03973090648651123, 0.09381268173456192, -0.15344084799289703, -0.1939067244529724, -0.27677321434020996,
         0.05719214305281639, 0.35748475790023804, 0.17011477053165436, -0.195779949426651, 0.031220795586705208,
         -0.045411936938762665, 0.0393061637878418, 0.057114969938993454, 0.025728415697813034, -0.09517598897218704,
         0.0819753110408783, 0.010168178007006645, 0.05069887265563011, 0.10578115284442902, 0.012738698162138462,
         -0.05656563490629196, 0.18493573367595673, -0.05016670376062393, 0.11327967047691345, 0.06805150210857391,
         0.019329875707626343, -0.09375904500484467, -0.11677227169275284, -0.18010956048965454, -0.009878698736429214,
         0.02820580080151558, -0.12709492444992065, 0.017241226509213448, 0.07643860578536987, -0.16547921299934387,
         0.1510326862335205, 0.0007926775142550468, -0.03586937114596367, -0.061970919370651245, 0.04305221140384674,
         -0.09658854454755783, 0.03136184439063072, 0.15022000670433044, -0.30718541145324707, 0.1855190247297287,
         0.12297796458005905, 0.041665226221084595, 0.1252112090587616, 0.043172772973775864, -0.026081113144755363,
         -0.02107826992869377, -0.06208287179470062, -0.12591809034347534, -0.11271263659000397, 0.05582129582762718,
         -0.018121516332030296, 0.06482870876789093, -0.015231255441904068]
    ]

    image_to_compare = face_recognition.load_image_file("img/scr9.jpg")  # загружаем фото которое надо сравнить
    image_to_compare_encoding = face_recognition.face_encodings(image_to_compare)[0]  # вычисляем дескриптор
    result = face_recognition.compare_faces(known_encodings, image_to_compare_encoding)  # получаем результат сравнения
    print(result)


def main():
    start_time = time.time()
    discr_compare()
    print("--- %s seconds ---" % (time.time() - start_time))


if __name__ == '__main__':
    main()
